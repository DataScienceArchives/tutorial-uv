---
title: "Gesti√≥n de proyectos Python con `uv`"
author: "Felipe Ortega"
date: "2026/02/19"
lang: es
---

# Introducci√≥n

En este tutorial se explican aspectos b√°sicos y ejemplos de uso de
`uv` <https://docs.astral.sh/uv/>, un gestor de paquetes y proyectos
Python tremendamente r√°pido y eficiente, escrito en Rust.

Algunas de sus caracter√≠sticas m√°s detacables son:

- üöÄ Soporta los principales gestores de paquetes como `pip` o
`virtualenv`.
- &#9889; ejecuci√≥n entre 10-100 veces m√°s r√°pido que `pip`.
- üóÇÔ∏è Gesti√≥n integral del proyecto con un archivo *lock* universal
y un archivo `.toml` legible con todos los datos de configuraci√≥n y
dependencias.
- üíæ Gesti√≥n eficiente de espacio en disco, con una cach√© global
para mantenimiento de dependencias y eliminaci√≥n de duplicados.
- üñ•Ô∏è Soporte multiplataforma (Linux, macOS y Windows).

## Instalaci√≥n

Existen diferentes m√©todos de instalaci√≥n, documentados en la siguiente p√°gina:

- <https://docs.astral.sh/uv/getting-started/installation/>.

En Linux o macOS, lo recomendable es instalar `uv` mediante `curl`:

```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

En Windows el proceso es muy similar, ejecutando un comando desde una terminal, por ejemplo, PowerShell.

## Principales ventajas de `uv`

- Todo el c√≥digo y los metadatos de un proyecto residen en un √∫nico directorio, separado del resto de proyectos.
Esto facilita la organizaci√≥n y gesti√≥n de los proyectos, as√≠ como su traslado a otros sistemas o su compartici√≥n con otros desarrolladores.

- Cada proyecto tiene un archivo `pyproject.toml` con toda la informaci√≥n de configuraci√≥n y dependencias software.
Esto incluye:
  - **Metadatos** sobre el proyecto (nombre, versi√≥n, descripci√≥n, etc.).
  - La **versi√≥n de Python** que se usa en el proyecto.
  - El listado de paquetes que son **dependencias** para su correcto funcionamiento. Esto permite que se pueda 
  consultar esta informaci√≥n en el futuro (si hace tiempo que no trabajamos en un proyecto), as√≠ como publicar 
  la relaci√≥n de dependencias para que otros desarrolladores puedan replicar el mismo entorno.
  - El listado de paquetes que son **dependencias de desarrollo**, necesarias para el desarrollo del proyecto pero no para su funcionamiento (por ejemplo, paquetes de testing o de generaci√≥n de documentaci√≥n).

- Cada proyecto tiene su propio **int√©rprete de Python** (entorno virtual). Esto permite que la ejecuci√≥n del c√≥digo proyectos sean autocontenida y facilita su gesti√≥n. Las dependencias software se instalan en el entorno virtual del proyecto, sin afectar a otros proyectos o al sistema operativo. Tambi√©n se pueden sincronizar f√°cilmente los entornos virtuales con el listado de dependencias declarado en el archivo `pyproject.toml`.

- Existe una **cach√© global** que almacena los paquetes instalados. S√≥lo se instalan los paquetes estrictamente
necesarios para cada proyecto. Esto supone un considerable ahorro de espacio en disco, frente a otros gestores
alternativos de paquetes Python que instalan por defecto muchos paquetes que luego no se utilzan.


# Gesti√≥n de proyectos

## Inicializaci√≥n de un proyecto

::: {.callout-note}
Fuente: <https://docs.astral.sh/uv/concepts/projects/init/>.
:::

Para crear un proyecto ejecutamos en una terminal el siguiente comando, donde sustituiremos 
`my-project` por el nombre de nuestro proyecto o aplicaci√≥n:

```bash
uv init my-project
```

Como resultado, dentro del dierctorio se crean varios archivos que podemos inspeccionar.

```bash
tree example-app
tree -a my-project/
my-project/
.
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ pyproject.toml
‚îú‚îÄ‚îÄ .python-version
‚îî‚îÄ‚îÄ README.md
```

- Un archivo `main.py` con un ejemplo b√°sico de c√≥digo Python, que imprime un mensaje de bienvenida en la terminal.
- Archivo `pyproject.toml` que contiene metadatos del proyecto, as√≠ como informaci√≥n de configuraci√≥n,
dependencias de funcionamiento y de desarrollo.
- Archivo `.python-version` con informaci√≥n sobre la versi√≥n de Python
que se usa en el proyecto.
- Un archivo `README.md` y un archivo `hello.py` de ejemplo.

Se pueden crear diferentes tipos de proyectos con la opci√≥n apropiada
del comando `uv init`:

- `uv init --package my-pkg` para creaci√≥n de paquetes Python (que
luego se puedan publicar en PyPI).
- `uv init --lib my-lib` para librer√≠as que ofrezcan objetos y funciones
a otros proyectos.
- `uv init my-project --bare` para generar un proyecto con la m√≠nima
configuraci√≥n posible (s√≥lo crea un archivo `pyproject.toml`).

### Ejemplo de un archivo `pyproject.toml`

La sintaxis y estructura del archivo `pyproject.toml` se especifica en el 
[est√°ndar PEP 621](https://packaging.python.org/en/latest/specifications/pyproject-toml/), que define 
c√≥mo se deben declarar los metadatos y las dependencias de un proyecto Python.

```toml
[project]
name = "my-project"
version = "0.1.0"
description = "A simple Python project created with uv"
authors = [
    { name = "Felipe Ortega", email = "felipe.ortega@urjc.es" }
]
readme = "README.md"
requires-python = ">=3.11"
dependencies = [
    "requests",
    "numpy",
    "polars"
] 
```

## Gesti√≥n de dependencias software

::: {.callout-note}
Fuente: <https://docs.astral.sh/uv/concepts/projects/dependencies/>.
:::

### A√±adir dependencias a un proyecto

Para a√±adir una nueva dependencia a un proyecto, se puede editar el archivo `pyproject.toml` e incluir 
el nombre del paquete en la secci√≥n `dependencies`, o bien ejecutar el siguiente comando en la terminal:

```bash
uv add requests
```

Esto genera una nueva entrada en el archivo `pyproject.toml` con el nombre del paquete y su versi√≥n, 
y tambi√©n se instala el paquete en el entorno virtual del proyecto.

```toml
[project]
name = "my-project"
version = "0.1.0"
description = "A simple Python project created with uv"
dependencies = ["requests>=2.31.0"]
```

El listado de dependencias especificadas en la variable de configuraci√≥n `project.dependencies` sigue la
sintaxis expecificada en el PEP 508, que permite incluir informaci√≥n adicional sobre la versi√≥n del paquete, as√≠ comootros detalles como el sistema operativo o la versi√≥n de Python.

Tambi√©n se pueden a√±adir dependencias de repositorios de terceros, por ejemplo, de GitHub, que todav√≠a no
est√©n publicadas en PyPI:

```bash
uv add "httpx @ git+https://github.com/encode/httpx"
```

Esto a√±ade una nueva entrada en el archivo `pyproject.toml` con el nombre del paquete y la URL del repositorio
de fuentes de c√≥digo:

```toml
[tool.uv.sources]
httpx = { git = "https://github.com/encode/httpx" }
```
### Eliminar dependencias de un proyecto

Para eliminar una dependencia de un proyecto, se puede editar el archivo `pyproject.toml` y eliminar la
entrada correspondiente en la secci√≥n `dependencies`, o bien ejecutar el siguiente comando en la terminal:

```bash
uv remove requests
```

## Gesti√≥n de dependencias software de desarrollo

::: {.callout-note}
Fuente: <https://docs.astral.sh/uv/concepts/projects/dependencies/>.
:::

Al contrario de las dependencias de funcionamiento, las dependencias de desarrollo no son necesarias para 
el correcto funcionamiento de un proyecto, sino que son necesarias para su desarrollo, por ejemplo, 
para ejecutar tests o generar documentaci√≥n. Por lo tanto, *no se incluyen* en los requisitos de 
instalaci√≥n del proyecto cuando se publica en el PyPI o en otros repositorios de paquetes Python.

Para a√±adir una dependencia de desarrollo a un proyecto se ejecuta:

```bash
uv add --dev pytest
```

`uv` utiliza el formato de tabla `[dependency-groups]` del archivo `pyproject.toml` para declarar las dependencias de desarrollo, con el nombre del grupo de dependencias (en este caso, `dev`) y el listado de paquetes que forman parte de ese grupo:

```toml
[dependency-groups]
dev = [
  "pytest >=8.1.1,<9"
]
```

Se puede consultar la [PEP 735 ](https://peps.python.org/pep-0735/#dependency-groups) para m√°s detalles sobre la sintaxis y estructura de esta secci√≥n del archivo `pyproject.toml`.

## Dependencias de construcci√≥n de un proyecto

Cuando estamos desarrollando un paquete Python que queremos publicar en PyPI, es necesario declarar las dependencias de 
construcci√≥n del proyecto, es decir, los paquetes necesarios para construir el paquete Python a partir del c√≥digo fuente
(pero que no se necesita instalar para que funcione una vez generado). 

Estas dependencias se declaran en la secci√≥n `[build-system]` del archivo `pyproject.toml`, con el nombre del sistema de construcci√≥n (por ejemplo, `setuptools`) y el listado de paquetes necesarios para su funcionamiento:

```toml
[build-system]
requires = ["setuptools>=42"]
build-backend = "setuptools.build_meta"
```

## Ejecuci√≥n de c√≥digo

::: {.callout-note}
Fuente: <https://docs.astral.sh/uv/concepts/projects/run/>.
:::

Por defecto `uv` ejecuta el c√≥digo Python en el entorno virtual del proyecto, lo que garantiza que se utilizan las dependencias software declaradas en el archivo `pyproject.toml` y que el proyecto es autocontenida. Para ejecutar un script Python, se puede usar el comando `uv run` seguido del nombre del script:

```bash
uv run main.py
```

Para la ejecuci√≥n de este c√≥digo, `uv` activa el entorno virtual del proyecto, instala las dependencias necesarias (si no est√°n ya instaladas) y luego ejecuta el script `main.py` con el int√©rprete de Python del entorno virtual. El entorno
virtual del proyecto reside en el directorio `.venv` dentro del directorio del proyecto, y se activa autom√°ticamente al ejecutar el comando `uv run`.

```bash
jfelipe@helium:~/Docencia/URJC/Grado/SDPD2/lab/example-uv$ uv run main.py
Using CPython 3.11.11
Creating virtual environment at: .venv
Hello from example-uv!
```

Cuando a√±adimos paquetes de dependencias de funcionamiento o de desarrollo a un proyecto, `uv` 
los instala autom√°ticamente en el entorno virtual del proyecto.

### Activaci√≥n del entorno virtual de un proyecto

Para activar el entorno virtual de un proyecto, si estamos usando el que crea por defecto `uv` en nuestro
proyecto, se puede usar el comando:

```bash
$ source .venv/bin/activate
```

Para desactivar el entorno virtual, se ejecuta el comando:

```bash
$ deactivate
```

Tambi√©n se puede usar el comando `uv shell` para activar el entorno virtual del proyecto en una nueva sesi√≥n de terminal:

```bash
uv shell
```

P√≥r √∫ltimo, se puede configurar nuestra IDE favorita para que use el int√©rprete de Python del entorno virtual 
del proyecto, lo que nos permitir√° ejecutar el c√≥digo del proyecto directamente desde la IDE, sin necesidad de 
activar manualmente el entorno virtual en la terminal. Por ejemplo, en Visual Studio Code, se puede seleccionar 
el int√©rprete de Python del entorno virtual del proyecto desde la paleta de comandos (Ctrl+Shift+P) y luego 
ejecutar el c√≥digo desde la IDE.